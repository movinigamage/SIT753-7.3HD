# SonarQube Configuration for Node.js Jenkins CI/CD Pipeline
# Project identification
sonar.projectKey=nodejs-jenkins-cicd
sonar.projectName=Node.js Jenkins CI/CD Pipeline
sonar.projectVersion=1.0.0

# Project description
sonar.projectDescription=Node.js application with comprehensive Jenkins CI/CD pipeline implementation for SIT223-SIT753 assignment

# Source code configuration
sonar.sources=src
sonar.tests=tests
sonar.test.inclusions=tests/**/*.js
sonar.exclusions=node_modules/**,coverage/**,dist/**,build/**

# Language and file encoding
sonar.sourceEncoding=UTF-8
sonar.javascript.file.suffixes=.js

# Test configuration
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.testExecutionReportPaths=test-results/junit.xml

# Coverage configuration
sonar.coverage.exclusions=**/node_modules/**,**/coverage/**,**/tests/**,**/*.test.js,**/*.spec.js
sonar.coverage.jacoco.xmlReportPaths=coverage/cobertura-coverage.xml

# Duplication configuration
sonar.cpd.exclusions=**/node_modules/**,**/coverage/**,**/tests/**

# Quality gate configuration
sonar.qualitygate.wait=true

# Analysis parameters
sonar.analysis.mode=publish
sonar.issuesReport.console.enable=true
sonar.verbose=true

# JavaScript/Node.js specific settings
sonar.javascript.nodejs.version=18
sonar.javascript.eslint.reportPaths=eslint-report.json

# Security and vulnerability scanning
sonar.security.hotspots.includeAll=true
sonar.security.includeAll=true

# Code smells and bugs
sonar.issue.ignore.multicriteria=e1,e2,e3
sonar.issue.ignore.multicriteria.e1.ruleKey=javascript:S1854
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.js
sonar.issue.ignore.multicriteria.e2.ruleKey=javascript:S1118
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.js
sonar.issue.ignore.multicriteria.e3.ruleKey=javascript:S1186
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*.js

# Branch analysis (if using SonarQube Developer Edition or higher)
sonar.branch.name=${BRANCH_NAME}
sonar.pullrequest.key=${CHANGE_ID}
sonar.pullrequest.branch=${CHANGE_BRANCH}
sonar.pullrequest.base=${CHANGE_TARGET}

# Additional exclusions for better analysis
sonar.exclusions=**/node_modules/**,**/coverage/**,**/dist/**,**/build/**,**/*.min.js,**/vendor/**

# Test file patterns
sonar.test.exclusions=**/node_modules/**,**/coverage/**,**/dist/**,**/build/**

# Custom rules and profiles
sonar.profile=Sonar way

# Integration with CI/CD
sonar.ci.branch.name=${BRANCH_NAME}
sonar.ci.buildNumber=${BUILD_NUMBER}
sonar.ci.commitSha=${GIT_COMMIT}

# Performance and memory settings
sonar.ce.javaOpts=-Xmx1024m -XX:+UseG1GC
sonar.scanner.metadataFilePath=sonar-report.json

# Webhook configuration (if needed)
sonar.webhook.url=${SONAR_WEBHOOK_URL}

# Additional metadata
sonar.links.ci=${BUILD_URL}
sonar.links.scm=${GIT_URL}
sonar.links.issue=${JIRA_URL}

# Environment-specific settings
sonar.environment=${NODE_ENV}

# Custom metrics and measures
sonar.custom.metrics.nodejs.version=${NODE_VERSION}
sonar.custom.metrics.npm.version=${NPM_VERSION}
sonar.custom.metrics.jest.version=${JEST_VERSION}

# Analysis timeout
sonar.scanner.timeout=300

# Logging configuration
sonar.log.level=INFO
sonar.log.file=sonar.log

# Additional exclusions for specific patterns
sonar.exclusions=**/node_modules/**,**/coverage/**,**/dist/**,**/build/**,**/*.min.js,**/vendor/**,**/public/**,**/static/**

# Test execution and reporting
sonar.testExecutionReportPaths=test-results/junit.xml
sonar.coverage.jacoco.xmlReportPaths=coverage/cobertura-coverage.xml

# Code quality rules
sonar.javascript.rules.cyclomaticComplexity=10
sonar.javascript.rules.cognitiveComplexity=15
sonar.javascript.rules.maxLinesPerFile=500
sonar.javascript.rules.maxLinesInFunction=50
sonar.javascript.rules.maxParameters=7
sonar.javascript.rules.maxNestingDepth=4

# Security rules
sonar.javascript.rules.security.hotspots=true
sonar.javascript.rules.security.vulnerabilities=true
sonar.javascript.rules.security.owasp=true

# Maintainability rules
sonar.javascript.rules.maintainability.duplicatedBlocks=true
sonar.javascript.rules.maintainability.codeSmells=true
sonar.javascript.rules.maintainability.technicalDebt=true

# Reliability rules
sonar.javascript.rules.reliability.bugs=true
sonar.javascript.rules.reliability.vulnerabilities=true
sonar.javascript.rules.reliability.securityHotspots=true
